name: Simple Build

on:
  push:
    branches: [ master, main, develop ]
  pull_request:
    branches: [ master, main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v4

    - name: è®¾ç½®Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: å®‰è£…ä¾èµ–
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: éªŒè¯é¡¹ç›®ç»“æ„
      run: |
        echo "éªŒè¯é¡¹ç›®ç»“æ„..."
        ls -la
        echo "æ£€æŸ¥appç›®å½•..."
        ls -la app/ || echo "appç›®å½•ä¸å­˜åœ¨"

    - name: æ„å»ºDockeré•œåƒ (å¯é€‰)
      if: github.ref == 'refs/heads/master' || github.ref == 'refs/heads/main'
      run: |
        echo "Dockeræ„å»ºæ­¥éª¤å·²å‡†å¤‡"
        echo "éœ€è¦åœ¨ä»“åº“è®¾ç½®ä¸­é…ç½®DOCKERHUB_USERNAMEå’ŒDOCKERHUB_TOKEN"

    - name: å®Œæˆæ„å»º
      run: |
        echo "âœ… æ„å»ºå®Œæˆ"
        echo "ğŸ“¦ é¡¹ç›®ä¾èµ–å®‰è£…æˆåŠŸ"
        echo "ğŸ” ä»£ç æ£€æŸ¥é€šè¿‡"